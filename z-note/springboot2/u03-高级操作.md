# 1. Servlet原生组件
     
**概念：** springboot支持原生的servlet组件，如servlet过滤器和servlet监听器等：
- 开发原生servlet类，过滤器类和监听器类，无需添加注解。
- 开发配置类并IOC `o.s.b.w.s.ServletRegistrationBean` servlet类：
    - 利用构造传入servlet实例和路由。
- 开发配置类并IOC `o.s.b.w.s.FilterRegistrationBean` 过滤器链类：
    - `fiters.setFilter()`：在过滤器链中加入自定义过滤器。
    - `fiters.addUrlPatterns()`：在过滤器链中加入自定义过滤器拦截规则。
- 开发配置类并IOC `o.s.b.w.s.ServletListenerRegistrationBean` 监听器类：
    - 利用构造传入监听器实例，每个监听对应一个 `@Bean`。
- 注解配置：为原生servlet类，过滤器类和监听器类添加 `@WebServlet/@WebFilter/@WebListener`：
    - 在启动类中使用 `@ServletComponentScan` 扫描servlet类，过滤器类和监听器类所在包。
- 同时配置：让启动类实现 `ServletContextInitializer` 接口并重写 `onStartup()`：
    - `context.addServlet().addMapping()`：配置servlet类并设置路由。
    - `context.addFilter().addMappingForUrlPatterns()`：配置过滤器类并设置拦截规则。
    - `context.addListener()`：配置监听器类。

**源码：** /springboot2/
- src: `c.j.s.servlet.*`
- src: `c.j.s.servlet.filter.*`
- src: `c.j.s.servlet.listener.*`
- psm: `/api/servlet/bean`
- psm: `/api/servlet/scan`
- psm: `/api/servlet/context`

# 2. Spring拦截器

添加aop依赖
<dependency>
	<groupId>org.springframework.boot</groupId>
	<artifactId>spring-boot-starter-aop</artifactId>
</dependency>


配置一个切面类：TestAspect.java
@Aspect
@Configuration
public class TestAspect {
    @Around("execution(* com.joe.boot.controller..*(..))")
    public Object method(ProceedingJoinPoint pjp) throws Throwable {
        System.out.println("拦截器前置处理...");
        Object obj = null;// 返回值
        try {
            // proceed()方法就是在执行客户方法，它的返回值就是客户方法的返回值
            obj = pjp.proceed(pjp.getArgs());// 放行
            System.out.println("拦截器返回值处理...");
        } catch (Throwable e) {
            System.out.println("拦截器异常处理...");
        }
        System.out.println("拦截器后置处理...");
        return obj;
    }
}





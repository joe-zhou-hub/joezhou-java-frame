# 1. 动态条件标签

**概念：** 条件标签配合OGNL表达式用于判断是否允许拼接部分指定的SQL语句：
- `<if>`：用于单独条件判断：
    - 使用 `test` 属性设置条件，OGNL表达式建议用单引号，以免冲突表达式中的字符串。
- `<choose>`：用于多选一条件判断：
    - 子标签 `<when>` 使用 `test` 属性设置条件，OGNL表达式建议用单引号，以免冲突表达式中的字符串。
    - 子标签 `<otherwise>` 用于设置所有条件均不满足时的处理。
- `<where>`：WHERE语句不为空时，生成 `WHERE` 关键字并删除WHERE语句中第一个 `AND`。 
- `<trim prefix="WHERE" prefixOverrides="AND|OR">`：WHERE语句不为空时，生成 `WHERE` 前缀关键字并删除WHERE语句中第一个 `AND` 或 `OR`。 

**源码：** /mybatis3/
- res: `classpath:mybatis-dynamic.xml`
- res: `classpath:com/joezhou/mapper/UserMapper.xml`
- src: `c.j.pojo.User`
- src: `c.j.mapper.UserMapper`
- tst: `c.j.dynamic.UserTest.findByIf()`
- tst: `c.j.dynamic.UserTest.findByWhere()`
- tst: `c.j.dynamic.UserTest.findByTrim()`
- tst: `c.j.dynamic.UserTest.findByChoose()`

# 2. 动态循环标签

**概念：** 循环标签 `<foreach>` 用于循环拼接部分指定的SQL语句：
- `collection`：值固定为 `array` 或 `list` 或一个Map结构（值为数组或列表）的KEY。
- `items`：设置循环中间变量。
- `open/close`：设置循环开始/结束时拼接的字符串SQL代码。
- `separator`：设置拼接符，自动忽略SQL语句中多余的拼接符。

**源码：** /mybatis3/
- res: `classpath:com/joezhou/mapper/UserMapper.xml`
- src: `c.j.mapper.UserMapper`
- tst: `c.j.dynamic.UserTest.findWithArray()`
- tst: `c.j.dynamic.UserTest.findWithList()`
- tst: `c.j.dynamic.UserTest.findWithMap()`

# 3. 动态修改标签

**概念：** 修改标签 `<set>` 用于控制修改操作时，忽略null字段：
- `<set>`：生成 `SET` 关键字并删除SET语句中最后一个 `,`。 
- `<trim prefix="SET" suffixOverrides=",">`：生成 `SET` 前缀关键字并删除SET语句中最后一个 `,`。

**源码：** /mybatis3/
- res: `classpath:com/joezhou/mapper/UserMapper.xml`
- src: `c.j.mapper.UserMapper`
- tst: `c.j.dynamic.UserTest.updateBySet()`
- tst: `c.j.dynamic.UserTest.updateByTrim()`

# 4. 多参数接口

**概念：** 
- `@Param`：用于对接口参数起别名，仅在客户通过接口方法调用语句块时生效：
    - OGNL表达式和占位符中仅支持别名或 `param123..`。
- `_parameter`：SQL语句块中的内置参数：
    - 接口参数为一个简单类型时，`_parameter` 代表这个参数本身，占位符中使用 `param1` 获取该参数。
    - 接口参数为多个简单类型时，`_parameter` 代表这个参数集合：
        - `_parameter.get("别名/param1")`：OGNL表达式中获取参数集合中的第一个参数。
        - `#{别名/param1}`：占位符中获取参数集合中的第一个参数。
    - 接口参数为一个实体类型时，直接使用实体类中的属性即可。
    - 接口参数为多个实体类型时，`_parameter` 代表这个实体类集合：
        - `_parameter.param1/别名.name`：OGNL表达式中获取第一个POJO参数的name属性。
        - `#{param1/别名.name}`：占位符中获取第一个POJO参数的name属性。

**源码：** /mybatis3/
- res: `classpath:com/joezhou/mapper/UserMapper.xml`
- src: `c.j.mapper.UserMapper`
- tst: `c.j.dynamic.UserTest.findByNameAndGender()`
- tst: `c.j.dynamic.UserTest.findBySingleParam()`
- tst: `c.j.dynamic.UserTest.findByMultipleParam()`
- tst: `c.j.dynamic.UserTest.findByMultiplePojoParam()`

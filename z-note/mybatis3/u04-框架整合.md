# 1. 整合spring

**概念：**
- 添加项目依赖：
    - Mybatis327依赖
    - spring413依赖
    - spring+Mybatis整合依赖
    - 连库驱动依赖
    - 数据库连接池依赖

**链接：** [mybatis_spring整合全部包.zip]()

**配置：** pom.xml
```xml
<properties>
    <spring>4.3.14.RELEASE</spring>
    <mybatis>3.2.7</mybatis>
</properties>
```

**配置：** pom.xml
```xml
<!--junit-->
<dependency><groupId>junit</groupId><artifactId>junit</artifactId><version>4.12</version><scope>test</scope></dependency>

<!--mybatis-->
<dependency><groupId>org.mybatis</groupId><artifactId>mybatis</artifactId><version>${mybatis}</version></dependency>

<!--ant-->
<dependency><groupId>org.apache.ant</groupId><artifactId>ant</artifactId><version>1.9.6</version></dependency>

<!--asm-->
<dependency><groupId>asm</groupId><artifactId>asm</artifactId><version>3.3.1</version></dependency>

<!--cglib-->
<dependency><groupId>cglib</groupId><artifactId>cglib</artifactId><version>2.2.2</version></dependency>

<!--commons-logging-->
<dependency><groupId>commons-logging</groupId><artifactId>commons-logging</artifactId><version>1.1.1</version></dependency>

<!--log4j-core-->
<dependency><groupId>org.apache.logging.log4j</groupId><artifactId>log4j-core</artifactId><version>2.3</version></dependency>

<!--log4j-->
<dependency><groupId>log4j</groupId><artifactId>log4j</artifactId><version>1.2.17</version></dependency>

<!--ognl-->
<dependency><groupId>ognl</groupId><artifactId>ognl</artifactId><version>3.1.16</version></dependency>

<!--slf4j-api-->
<dependency><groupId>org.slf4j</groupId><artifactId>slf4j-api</artifactId><version>1.7.25</version></dependency>

<!--slf4j-log4j12-->
<dependency><groupId>org.slf4j</groupId><artifactId>slf4j-log4j12</artifactId><version>1.7.25</version><scope>test</scope></dependency>

<!--spring-->
<dependency><groupId>org.springframework</groupId><artifactId>spring-core</artifactId><version>${spring}</version></dependency>

<!--spring-test-->
<dependency><groupId>org.springframework</groupId><artifactId>spring-test</artifactId><version>${spring}</version></dependency>

<!--spring-aspects-->
<dependency><groupId>org.springframework</groupId><artifactId>spring-aspects</artifactId><version>${spring}</version></dependency>

<!--spring-beans-->
<dependency><groupId>org.springframework</groupId><artifactId>spring-beans</artifactId><version>${spring}</version></dependency>

<!--spring-context-->
<dependency><groupId>org.springframework</groupId><artifactId>spring-context</artifactId><version>${spring}</version></dependency>

<!--spring-context-support-->
<dependency><groupId>org.springframework</groupId><artifactId>spring-context-support</artifactId><version>${spring}</version></dependency>

<!--spring-expression-->
<dependency><groupId>org.springframework</groupId><artifactId>spring-expression</artifactId><version>${spring}</version></dependency>

<!--spring-tx-->
<dependency><groupId>org.springframework</groupId><artifactId>spring-tx</artifactId><version>${spring}</version></dependency>

<!--spring-jdbc-->
<dependency><groupId>org.springframework</groupId><artifactId>spring-jdbc</artifactId><version>${spring}</version></dependency>

<!--spring和mybatis整合包 -->
<dependency><groupId>org.mybatis</groupId><artifactId>mybatis-spring</artifactId><version>1.2.5</version></dependency>

<!--mysql-connector-java-->
<dependency><groupId>mysql</groupId><artifactId>mysql-connector-java</artifactId><version>8.0.15</version><scope>runtime</scope></dependency>

<!--commons-dbcp-->
<dependency><groupId>commons-dbcp</groupId><artifactId>commons-dbcp</artifactId><version>1.2.2</version></dependency>

<!--lombok-->
<dependency><groupId>org.projectlombok</groupId><artifactId>lombok</artifactId><version>1.18.8</version><scope>provided</scope></dependency>
```

# 4. 实体类

**源码：** User.java
```java
/**
 * @author JoeZhou
 */
@Data
public class User implements Serializable {
    private Integer id;
    private String name;
    private Integer age;
    private String gender;
}
```

# 5. 配置文件

## 5.1 数据源文件

**配置：** db.properties
```txt
jdbc.driver=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://127.0.0.1:3306/db_student?\
    useUnicode=true&characterEncoding=utf-8&\
    useSSL=false&serverTimezone=UTC
jdbc.username=root
jdbc.password=root
jdbc.initialSize=0
jdbc.maxActive=20
jdbc.maxIdle=20
jdbc.minIdle=1
jdbc.maxWait=60000
```

## 5.2 日志文件

**配置：** log4j.properties
```txt
log4j.rootLogger=DEBUG, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n
```

## 5.3 mybaits主配文件

**配置：** mybatis-core.xml
```xml
<!DOCTYPE configuration
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-config.dtd">

<configuration>
    <typeAliases>
        <package name="com.joe.pojo"/>
    </typeAliases>
</configuration>
```

> mapper.xml文件的引入和数据源的配置交给spring来做。